package saga;

import static org.junit.Assert.assertEquals;
import static org.junit.jupiter.api.Assertions.*;

import java.util.HashSet;

import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

class FornecedorControllerTest {

	private FornecedorController fornecedorController;
	
	@BeforeEach
	public void criaController() {
		fornecedorController = new FornecedorController();
	}
	
	@Test
	public void testCadastraFornecedorValido() {
		assertEquals("Seu Olavo", fornecedorController.cadastraFornecedor("Seu Olavo", "olavo@gmail.com", "83 99999-8888"));
	}

	@Test
	public void testCadastraFornecedorExistente() {
		try {
			fornecedorController.cadastraFornecedor("Seu Olavo", "olavo@gmail.com", "83 99348-1092");
			fornecedorController.cadastraFornecedor("Seu Olavo", "olavo@gmail.com", "83 99348-1092");
			fail("Deveria lancar excecao.");
		} catch (IllegalArgumentException e) {
			assertEquals("Erro no cadastro de fornecedor: fornecedor ja existe.", e.getMessage());
		}
	}
	
	@Test
	public void testCadastraFornecedorNomeNulo() {
		try {
			fornecedorController.cadastraFornecedor(null, "olavo@gmail.com", "83 99348-1092");
			fail("Deveria lancar excecao.");
		} catch (NullPointerException e) {
			assertEquals("Erro no cadastro do fornecedor: nome nao pode ser vazio ou nulo.", e.getMessage());
		}
	}
	
	@Test
	public void testCadastraFornecedorNomeVazio() {
		try {
			fornecedorController.cadastraFornecedor("", "olavo@gmail.com", "83 99348-1092");
			fail("Deveria lancar excecao.");
		} catch (IllegalArgumentException e) {
			assertEquals("Erro no cadastro do fornecedor: nome nao pode ser vazio ou nulo.", e.getMessage());
		}
	}
	
	@Test
	public void testCadastraFornecedorEmailNulo() {
		try {
			fornecedorController.cadastraFornecedor("Seu Olavo", null, "83 99348-1092");
			fail("Deveria lancar excecao.");
		} catch (NullPointerException e) {
			assertEquals("Erro no cadastro do fornecedor: email nao pode ser vazio ou nulo.", e.getMessage());
		}
	}
	
	@Test
	public void testCadastraFornecedorEmailVazio() {
		try {
			fornecedorController.cadastraFornecedor("Seu Olavo", "", "83 99348-1092");
			fail("Deveria lancar excecao.");
		} catch (IllegalArgumentException e) {
			assertEquals("Erro no cadastro do fornecedor: email nao pode ser vazio ou nulo.", e.getMessage());
		}
	}
	
	@Test
	public void testCadastraFornecedorTelefoneNulo() {
		try {
			fornecedorController.cadastraFornecedor("Seu Olavo", "olavo@gmail.com", null);
			fail("Deveria lancar excecao.");
		} catch (NullPointerException e) {
			assertEquals("Erro no cadastro do fornecedor: telefone nao pode ser vazio ou nulo.", e.getMessage());
		}
	}
	
	@Test
	public void testCadastraFornecedorTelefoneVazio() {
		try {
			fornecedorController.cadastraFornecedor("Seu Olavo", "olavo@gmail.com", "");
			fail("Deveria lancar excecao.");
		} catch (IllegalArgumentException e) {
			assertEquals("Erro no cadastro do fornecedor: telefone nao pode ser vazio ou nulo.", e.getMessage());
		}
	}
	
	@Test
	public void testExibeFornecedorValido() {
		fornecedorController.cadastraFornecedor("Seu Olavo", "olavo@gmail.com", "83 99348-1092");
		assertEquals("Seu Olavo - olavo@gmail.com - 83 99348-1092", fornecedorController.exibeFornecedor("Seu Olavo"));
	}
	
	@Test
	public void testExibeFornecedorNomeNulo() {
		try {
			fornecedorController.exibeFornecedor(null);
			fail("Deveria lancar excecao.");
		} catch (NullPointerException e) {
			assertEquals("Erro na exibicao do fornecedor: nome nao pode ser vazio ou nulo.", e.getMessage());
		}
	}
	
	@Test
	public void testExibeFornecedorNomeVazio() {
		try {
			fornecedorController.exibeFornecedor("");
			fail("Deveria lancar excecao.");
		} catch (IllegalArgumentException e) {
			assertEquals("Erro na exibicao do fornecedor: nome nao pode ser vazio ou nulo.", e.getMessage());
		}
	}
	
	@Test
	public void testExibeFornecedorNomeInexistente() {
		try {
			fornecedorController.exibeFornecedor("Irineu");
			fail("Deveria lancar excecao.");
		} catch (IllegalArgumentException e) {
			assertEquals("Erro na exibicao do fornecedor: fornecedor nao existe.", e.getMessage());
		}
	}
	
	@Test
	public void testListarFornecedores() {
		HashSet<String> listaFornecedores1 = new HashSet<String>();
		HashSet<String> listaFornecedores2 = new HashSet<String>();
		
		fornecedorController.cadastraFornecedor("Seu Olavo", "olavo@gmail.com", "83 99348-1092");
		fornecedorController.cadastraFornecedor("Raphael", "raphael@gmail.com", "83 98737-2109");
		listaFornecedores1.add(fornecedorController.exibeFornecedor("Seu Olavo"));
		listaFornecedores1.add(fornecedorController.exibeFornecedor("Raphael"));
		
		String[] x = fornecedorController.listarFornecedores().split(" \\| ");
		for (int i = 0; i < x.length; i++) {
			listaFornecedores2.add(x[i]);
		}
		assertEquals(listaFornecedores1,listaFornecedores2);
	}
	
	@Test
	public void testListarFornecedoresSemNenhumFornecedor() {
		assertEquals("",fornecedorController.listarFornecedores());
	}
	
	@Test
	public void testEditaFornecedorNomeNulo() {
		try {
			fornecedorController.editaFornecedor(null, "nome", "Irineu");
			fail("Deveria lancar excecao");
		} catch (NullPointerException e) {
			assertEquals("Erro na edicao do fornecedor: nome nao pode ser vazio ou nulo.", e.getMessage());
		}
	}
	
	@Test
	public void testEditaFornecedorNomeVazio() {
		try {
			fornecedorController.editaFornecedor("", "nome", "Irineu");
			fail("Deveria lancar excecao");
		} catch (IllegalArgumentException e) {
			assertEquals("Erro na edicao do fornecedor: nome nao pode ser vazio ou nulo.", e.getMessage());
		}
	}
	
	@Test
	public void testEditaFornecedorAtributoNulo() {
		try {
			fornecedorController.editaFornecedor("Raphael", null, "Irineu");
			fail("Deveria lancar excecao");
		} catch (NullPointerException e) {
			assertEquals("Erro na edicao do fornecedor: atributo nao pode ser vazio ou nulo.", e.getMessage());
		}
	}
	
	@Test
	public void testEditaFornecedorAtributoVazio() {
		try {
			fornecedorController.editaFornecedor("Raphael", "", "Irineu");
			fail("Deveria lancar excecao");
		} catch (IllegalArgumentException e) {
			assertEquals("Erro na edicao do fornecedor: atributo nao pode ser vazio ou nulo.", e.getMessage());
		}
	}
	
	
	@Test
	public void testEditaFornecedorNovoValorNulo() {
		try {
			fornecedorController.editaFornecedor("Raphael", "nome", null);
			fail("Deveria lancar excecao");
		} catch (NullPointerException e) {
			assertEquals("Erro na edicao do fornecedor: novo valor nao pode ser vazio ou nulo.", e.getMessage());
		}
	}
	
	@Test
	public void testEditaFornecedorNovoValorVazio() {
		try {
			fornecedorController.editaFornecedor("Raphael", "nome", "");
			fail("Deveria lancar excecao");
		} catch (IllegalArgumentException e) {
			assertEquals("Erro na edicao do fornecedor: novo valor nao pode ser vazio ou nulo.", e.getMessage());
		}
	}
	
	@Test
	public void testEditaFornecedorInexistente() {
		try {
			fornecedorController.editaFornecedor("Raphael", "nome", "Irineu");
			fail("Deveria lancar excecao");
		} catch (IllegalArgumentException e) {
			assertEquals("Erro na edicao do fornecedor: fornecedor inexistente.", e.getMessage());
		}
	}
}
